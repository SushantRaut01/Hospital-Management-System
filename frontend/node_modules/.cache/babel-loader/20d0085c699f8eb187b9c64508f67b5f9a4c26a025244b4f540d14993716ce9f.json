{"ast":null,"code":"// AssistantDashboard.jsx\nimport React,{useEffect,useState}from\"react\";import AddPatientForm from\"./AddPatientForm\";import PatientCardMobile from\"./PatientCardMobile\";import PatientTableDesktop from\"./PatientTableDesktop\";import{apiFetch}from\"../../utils/api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AssistantDashboard=()=>{const[patients,setPatients]=useState([]);const[editingPatient,setEditingPatient]=useState(null);// Fetch patients from API\nconst fetchPatients=async()=>{try{const data=await apiFetch(\"/api/assistant/patients/\");setPatients(data);}catch(err){console.error(\"Fetch error:\",err);}};useEffect(()=>{fetchPatients();},[]);const handlePatientAdded=()=>{fetchPatients();setEditingPatient(null);};// Called when user clicks \"Edit\" in table or card\nconst handleEditPatient=patient=>{var _document$getElementB;if(!patient||!patient.id){console.error(\"Invalid patient to edit:\",patient);alert(\"Cannot edit: patient has no ID!\");return;}setEditingPatient(patient);(_document$getElementB=document.getElementById(\"popupForm\"))===null||_document$getElementB===void 0?void 0:_document$getElementB.classList.remove(\"hidden\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-100 min-h-screen p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-800\",children:\"Assistant Dashboard\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setEditingPatient(null);// Reset form to \"add\" mode\ndocument.getElementById(\"popupForm\").classList.remove(\"hidden\");},className:\"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg shadow\",children:\"+ Add Patient\"})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"flex flex-col md:flex-row gap-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by name or phone\",className:\"w-full md:w-1/3 px-4 py-2 border rounded-lg shadow-sm\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"w-full md:w-1/4 px-4 py-2 border rounded-lg shadow-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Statuses\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Pending\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"In Clinic\",children:\"In Clinic\"}),/*#__PURE__*/_jsx(\"option\",{value:\"On Hold\",children:\"On Hold\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Emergency\",children:\"Emergency\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"bg-gray-800 text-white px-5 py-2 rounded-lg hover:bg-gray-900\",children:\"Filter\"})]}),/*#__PURE__*/_jsx(PatientTableDesktop,{patients:patients,onEdit:handleEditPatient}),/*#__PURE__*/_jsx(PatientCardMobile,{patients:patients,onEdit:handleEditPatient})]}),/*#__PURE__*/_jsx(AddPatientForm,{editingPatient:editingPatient,onPatientSaved:handlePatientAdded})]});};export default AssistantDashboard;","map":{"version":3,"names":["React","useEffect","useState","AddPatientForm","PatientCardMobile","PatientTableDesktop","apiFetch","jsx","_jsx","jsxs","_jsxs","AssistantDashboard","patients","setPatients","editingPatient","setEditingPatient","fetchPatients","data","err","console","error","handlePatientAdded","handleEditPatient","patient","_document$getElementB","id","alert","document","getElementById","classList","remove","className","children","onClick","type","placeholder","value","onEdit","onPatientSaved"],"sources":["/home/ubuntu/Hospital-Management-System/frontend/src/Pages/Assistant/AssistantDashboard.jsx"],"sourcesContent":["// AssistantDashboard.jsx\nimport React, { useEffect, useState } from \"react\";\nimport AddPatientForm from \"./AddPatientForm\";\nimport PatientCardMobile from \"./PatientCardMobile\";\nimport PatientTableDesktop from \"./PatientTableDesktop\";\nimport { apiFetch } from \"../../utils/api\";\n\nconst AssistantDashboard = () => {\n  const [patients, setPatients] = useState([]);\n  const [editingPatient, setEditingPatient] = useState(null);\n\n  // Fetch patients from API\n  const fetchPatients = async () => {\n    try {\n      const data = await apiFetch(\"/api/assistant/patients/\");\n      setPatients(data);\n    } catch (err) {\n      console.error(\"Fetch error:\", err);\n    }\n  };\n\n  useEffect(() => {\n    fetchPatients();\n  }, []);\n\n  const handlePatientAdded = () => {\n    fetchPatients();\n    setEditingPatient(null);\n  };\n\n  // Called when user clicks \"Edit\" in table or card\n  const handleEditPatient = (patient) => {\n    if (!patient || !patient.id) {\n      console.error(\"Invalid patient to edit:\", patient);\n      alert(\"Cannot edit: patient has no ID!\");\n      return;\n    }\n    setEditingPatient(patient);\n    document.getElementById(\"popupForm\")?.classList.remove(\"hidden\");\n  };\n\n  return (\n    <div className=\"bg-gray-100 min-h-screen p-6\">\n      <div className=\"max-w-7xl mx-auto space-y-6\">\n        {/* Header */}\n        <div className=\"flex justify-between items-center\">\n          <h1 className=\"text-3xl font-bold text-gray-800\">Assistant Dashboard</h1>\n          <button\n            onClick={() => {\n              setEditingPatient(null);  // Reset form to \"add\" mode\n              document.getElementById(\"popupForm\").classList.remove(\"hidden\");\n            }}\n            className=\"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg shadow\"\n          >\n            + Add Patient\n          </button>\n        </div>\n\n        {/* Filter/Search Bar */}\n        <form className=\"flex flex-col md:flex-row gap-4\">\n          <input\n            type=\"text\"\n            placeholder=\"Search by name or phone\"\n            className=\"w-full md:w-1/3 px-4 py-2 border rounded-lg shadow-sm\"\n          />\n          <select className=\"w-full md:w-1/4 px-4 py-2 border rounded-lg shadow-sm\">\n            <option value=\"\">All Statuses</option>\n            <option value=\"Pending\">Pending</option>\n            <option value=\"In Clinic\">In Clinic</option>\n            <option value=\"On Hold\">On Hold</option>\n            <option value=\"Emergency\">Emergency</option>\n          </select>\n          <button\n            type=\"button\"\n            className=\"bg-gray-800 text-white px-5 py-2 rounded-lg hover:bg-gray-900\"\n          >\n            Filter\n          </button>\n        </form>\n\n        {/* Patient Table (Desktop) */}\n        <PatientTableDesktop patients={patients} onEdit={handleEditPatient} />\n\n        {/* Patient Cards (Mobile) */}\n        <PatientCardMobile patients={patients} onEdit={handleEditPatient} />\n      </div>\n\n      {/* Add/Edit Patient Popup Form */}\n      <AddPatientForm\n        editingPatient={editingPatient}\n        onPatientSaved={handlePatientAdded}\n      />\n    </div>\n  );\n};\n\nexport default AssistantDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}