{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import AddPatientForm from\"./AddPatientForm\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const PatientTableDesktop=()=>{const[patients,setPatients]=useState([]);const[editingPatient,setEditingPatient]=useState(null);const fetchPatients=()=>{fetch(\"http://127.0.0.1:8000/api/assistant/patients/\").then(res=>res.json()).then(data=>setPatients(data)).catch(err=>console.error(\"Fetch error:\",err));};useEffect(()=>{fetchPatients();},[]);const updateStatus=(id,newStatus)=>{fetch(\"http://127.0.0.1:8000/api/assistant/update-status/\".concat(id,\"/\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({status:newStatus})}).then(res=>{if(res.ok)fetchPatients();}).catch(err=>console.error(\"Update error:\",err));};const deletePatient=id=>{if(window.confirm(\"Are you sure you want to delete this patient?\")){fetch(\"http://127.0.0.1:8000/api/assistant/delete-patient/\".concat(id,\"/\"),{method:\"DELETE\"}).then(res=>{if(res.ok)fetchPatients();}).catch(err=>console.error(\"Delete error:\",err));}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"hidden md:block bg-white shadow rounded-lg overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full table-auto\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50 text-gray-600 text-sm uppercase\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left\",children:\"Age\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left\",children:\"Weight\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left\",children:\"Phone\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left\",children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left\",children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"text-sm text-gray-700 divide-y\",children:patients.filter(patient=>patient.status!==\"Done\").map((patient,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"\".concat(patient.status===\"Emergency\"?\"bg-red-100\":\"\",\" transition-all duration-300\"),children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4\",children:index+1}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 font-medium\",children:[patient.name,\" \",patient.surname]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4\",children:patient.age}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4\",children:[patient.weight,\" kg\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4\",children:patient.phone}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4\",children:new Date(patient.created_at).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-block px-3 py-1 text-xs rounded-full font-medium\\n                      \".concat(patient.status===\"In Clinic\"?\"bg-green-100 text-green-800\":patient.status===\"Hold\"?\"bg-gray-200 text-gray-800\":patient.status===\"Emergency\"?\"bg-red-100 text-red-800\":\"bg-yellow-100 text-yellow-800\"),children:patient.status})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"bg-green-600 text-white px-3 py-1 rounded text-xs\",onClick:()=>updateStatus(patient.pid,\"In Clinic\"),children:\"To Clinic\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-gray-500 text-white px-3 py-1 rounded text-xs\",onClick:()=>updateStatus(patient.pid,\"Hold\"),children:\"Hold\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-red-200 text-red-800 px-3 py-1 rounded text-xs\",onClick:()=>updateStatus(patient.pid,\"Emergency\"),children:\"Emergency\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-yellow-500 text-white px-3 py-1 rounded text-xs\",onClick:()=>setEditingPatient(patient),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-red-600 text-white px-3 py-1 rounded text-xs\",onClick:()=>deletePatient(patient.pid),children:\"Delete\"})]})})]},patient.id))})]})}),/*#__PURE__*/_jsx(AddPatientForm,{onPatientSaved:()=>{fetchPatients();setEditingPatient(null);},editingPatient:editingPatient})]});};export default PatientTableDesktop;","map":{"version":3,"names":["React","useEffect","useState","AddPatientForm","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PatientTableDesktop","patients","setPatients","editingPatient","setEditingPatient","fetchPatients","fetch","then","res","json","data","catch","err","console","error","updateStatus","id","newStatus","concat","method","headers","body","JSON","stringify","status","ok","deletePatient","window","confirm","children","className","filter","patient","map","index","name","surname","age","weight","phone","Date","created_at","toLocaleDateString","onClick","pid","onPatientSaved"],"sources":["/home/ubuntu/Hospital-Management-System/frontend/src/Pages/Assistant/PatientTableDesktop.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport AddPatientForm from \"./AddPatientForm\";\n\nconst PatientTableDesktop = () => {\n  const [patients, setPatients] = useState([]);\n  const [editingPatient, setEditingPatient] = useState(null);\n\n  const fetchPatients = () => {\n    fetch(\"http://127.0.0.1:8000/api/assistant/patients/\")\n      .then((res) => res.json())\n      .then((data) => setPatients(data))\n      .catch((err) => console.error(\"Fetch error:\", err));\n  };\n\n  useEffect(() => {\n    fetchPatients();\n  }, []);\n\n  const updateStatus = (id, newStatus) => {\n    fetch(`http://127.0.0.1:8000/api/assistant/update-status/${id}/`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ status: newStatus }),\n    })\n      .then((res) => {\n        if (res.ok) fetchPatients();\n      })\n      .catch((err) => console.error(\"Update error:\", err));\n  };\n\n  const deletePatient = (id) => {\n    if (window.confirm(\"Are you sure you want to delete this patient?\")) {\n      fetch(`http://127.0.0.1:8000/api/assistant/delete-patient/${id}/`, {\n        method: \"DELETE\",\n      })\n        .then((res) => {\n          if (res.ok) fetchPatients();\n        })\n        .catch((err) => console.error(\"Delete error:\", err));\n    }\n  };\n\n  return (\n    <>\n      <div className=\"hidden md:block bg-white shadow rounded-lg overflow-x-auto\">\n        <table className=\"min-w-full table-auto\">\n          <thead className=\"bg-gray-50 text-gray-600 text-sm uppercase\">\n            <tr>\n              <th className=\"px-6 py-3 text-left\">#</th>\n              <th className=\"px-6 py-3 text-left\">Name</th>\n              <th className=\"px-6 py-3 text-left\">Age</th>\n              <th className=\"px-6 py-3 text-left\">Weight</th>\n              <th className=\"px-6 py-3 text-left\">Phone</th>\n              <th className=\"px-6 py-3 text-left\">Date</th>\n              <th className=\"px-6 py-3 text-left\">Status</th>\n              <th className=\"px-6 py-3 text-left\">Action</th>\n            </tr>\n          </thead>\n          <tbody className=\"text-sm text-gray-700 divide-y\">\n            {patients\n              .filter((patient) => patient.status !== \"Done\")\n              .map((patient, index) => (\n \n              <tr\n                key={patient.id}\n                className={`${\n                  patient.status === \"Emergency\" ? \"bg-red-100\" : \"\"\n                } transition-all duration-300`}\n              >\n                <td className=\"px-6 py-4\">{index + 1}</td>\n                <td className=\"px-6 py-4 font-medium\">\n                  {patient.name} {patient.surname}\n                </td>\n                <td className=\"px-6 py-4\">{patient.age}</td>\n                <td className=\"px-6 py-4\">{patient.weight} kg</td>\n                <td className=\"px-6 py-4\">{patient.phone}</td>\n                <td className=\"px-6 py-4\">\n                  {new Date(patient.created_at).toLocaleDateString()}\n                </td>\n                <td className=\"px-6 py-4\">\n                  <span\n                    className={`inline-block px-3 py-1 text-xs rounded-full font-medium\n                      ${\n                        patient.status === \"In Clinic\"\n                          ? \"bg-green-100 text-green-800\"\n                          : patient.status === \"Hold\"\n                          ? \"bg-gray-200 text-gray-800\"\n                          : patient.status === \"Emergency\"\n                          ? \"bg-red-100 text-red-800\"\n                          : \"bg-yellow-100 text-yellow-800\"\n                      }`}\n                  >\n                    {patient.status}\n                  </span>\n                </td>\n                <td className=\"px-6 py-4\">\n                  <div className=\"flex flex-wrap gap-2\">\n                    <button\n                      className=\"bg-green-600 text-white px-3 py-1 rounded text-xs\"\n                      onClick={() => updateStatus(patient.pid, \"In Clinic\")}\n                    >\n                      To Clinic\n                    </button>\n                    <button\n                      className=\"bg-gray-500 text-white px-3 py-1 rounded text-xs\"\n                      onClick={() => updateStatus(patient.pid, \"Hold\")}\n                    >\n                      Hold\n                    </button>\n                    <button\n                      className=\"bg-red-200 text-red-800 px-3 py-1 rounded text-xs\"\n                      onClick={() => updateStatus(patient.pid, \"Emergency\")}\n                    >\n                      Emergency\n                    </button>\n                    <button\n                      className=\"bg-yellow-500 text-white px-3 py-1 rounded text-xs\"\n                      onClick={() => setEditingPatient(patient)}\n                    >\n                      Edit\n                    </button>\n                    <button\n                      className=\"bg-red-600 text-white px-3 py-1 rounded text-xs\"\n                      onClick={() => deletePatient(patient.pid)}\n                    >\n                      Delete\n                    </button>\n                  </div>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n      <AddPatientForm\n        onPatientSaved={() => {\n          fetchPatients();\n          setEditingPatient(null);\n        }}\n        editingPatient={editingPatient}\n      />\n    </>\n  );\n};\n\nexport default PatientTableDesktop;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}