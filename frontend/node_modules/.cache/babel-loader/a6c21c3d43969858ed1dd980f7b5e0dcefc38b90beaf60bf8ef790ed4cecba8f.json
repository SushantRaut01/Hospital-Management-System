{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import AddPatientForm from\"./AddPatientForm\";import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";const PatientCardMobile=()=>{const[patients,setPatients]=useState([]);const[editingPatient,setEditingPatient]=useState(null);const fetchPatients=()=>{fetch(\"/api/assistant/patients/\").then(res=>res.json()).then(data=>setPatients(data)).catch(err=>console.error(\"Fetch error:\",err));};useEffect(()=>{fetchPatients();},[]);const updateStatus=(id,newStatus)=>{fetch(\"/api/assistant/update-status/\".concat(id,\"/\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({status:newStatus})}).then(res=>{if(res.ok)fetchPatients();}).catch(err=>console.error(\"Update error:\",err));};const deletePatient=id=>{if(window.confirm(\"Are you sure you want to delete this patient?\")){fetch(\"/api/assistant/delete-patient/\".concat(id,\"/\"),{method:\"DELETE\"}).then(res=>{if(res.ok)fetchPatients();}).catch(err=>console.error(\"Delete error:\",err));}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"md:hidden space-y-4\",children:patients.filter(patient=>patient.status!==\"Done\").map((patient,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-xl shadow p-5 space-y-2 border transition-all duration-300 \".concat(patient.status===\"Emergency\"?\"bg-red-100\":\"bg-white\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-bold text-lg text-gray-900\",children:[patient.name,\" \",patient.surname]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500\",children:[\"Age: \",patient.age,\", Weight: \",patient.weight,\" kg\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500\",children:[\"Phone: \",patient.phone]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:new Date(patient.created_at).toLocaleDateString()}),/*#__PURE__*/_jsx(\"div\",{className:\"pt-1\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-block px-3 py-1 text-xs rounded-full font-medium\\n                \".concat(patient.status===\"In Clinic\"?\"bg-green-100 text-green-800\":patient.status===\"Hold\"?\"bg-gray-200 text-gray-800\":patient.status===\"Emergency\"?\"bg-red-100 text-red-800\":\"bg-yellow-100 text-yellow-800\"),children:patient.status})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2 pt-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"bg-yellow-500 text-white px-3 py-1 rounded text-xs\",onClick:()=>setEditingPatient(patient),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-green-600 text-white px-3 py-1 rounded text-xs\",onClick:()=>updateStatus(patient.pid,\"In Clinic\"),children:\"To Clinic\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-gray-500 text-white px-3 py-1 rounded text-xs\",onClick:()=>updateStatus(patient.pid,\"Hold\"),children:\"Hold\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-red-200 text-red-800 px-3 py-1 rounded text-xs\",onClick:()=>updateStatus(patient.pid,\"Emergency\"),children:\"Emergency\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-red-600 text-white px-3 py-1 rounded text-xs\",onClick:()=>deletePatient(patient.pid),children:\"Delete\"})]})]},patient.pid))}),/*#__PURE__*/_jsx(AddPatientForm,{editingPatient:editingPatient,onPatientSaved:()=>{fetchPatients();setEditingPatient(null);}})]});};export default PatientCardMobile;","map":{"version":3,"names":["React","useEffect","useState","AddPatientForm","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","PatientCardMobile","patients","setPatients","editingPatient","setEditingPatient","fetchPatients","fetch","then","res","json","data","catch","err","console","error","updateStatus","id","newStatus","concat","method","headers","body","JSON","stringify","status","ok","deletePatient","window","confirm","children","className","filter","patient","map","index","name","surname","age","weight","phone","Date","created_at","toLocaleDateString","onClick","pid","onPatientSaved"],"sources":["/home/ubuntu/Hospital-Management-System/frontend/src/Pages/Assistant/PatientCardMobile.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport AddPatientForm from \"./AddPatientForm\";\n\nconst PatientCardMobile = () => {\n  const [patients, setPatients] = useState([]);\n  const [editingPatient, setEditingPatient] = useState(null);\n\n  const fetchPatients = () => {\n    fetch(\"/api/assistant/patients/\")\n      .then((res) => res.json())\n      .then((data) => setPatients(data))\n      .catch((err) => console.error(\"Fetch error:\", err));\n  };\n\n  useEffect(() => {\n    fetchPatients();\n  }, []);\n\n  const updateStatus = (id, newStatus) => {\n    fetch(`/api/assistant/update-status/${id}/`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ status: newStatus }),\n    })\n      .then((res) => {\n        if (res.ok) fetchPatients();\n      })\n      .catch((err) => console.error(\"Update error:\", err));\n  };\n\n  const deletePatient = (id) => {\n    if (window.confirm(\"Are you sure you want to delete this patient?\")) {\n      fetch(`/api/assistant/delete-patient/${id}/`, {\n        method: \"DELETE\",\n      })\n        .then((res) => {\n          if (res.ok) fetchPatients();\n        })\n        .catch((err) => console.error(\"Delete error:\", err));\n    }\n  };\n\n  return (\n    <>\n      <div className=\"md:hidden space-y-4\">\n        {patients\n            .filter((patient) => patient.status !== \"Done\")\n            .map((patient, index) => (\n \n          <div\n            key={patient.pid}\n            className={`rounded-xl shadow p-5 space-y-2 border transition-all duration-300 ${\n              patient.status === \"Emergency\" ? \"bg-red-100\" : \"bg-white\"\n            }`}\n          >\n            <div className=\"font-bold text-lg text-gray-900\">\n              {patient.name} {patient.surname}\n            </div>\n            <div className=\"text-sm text-gray-500\">\n              Age: {patient.age}, Weight: {patient.weight} kg\n            </div>\n            <div className=\"text-sm text-gray-500\">Phone: {patient.phone}</div>\n            <div className=\"text-sm text-gray-500\">\n              {new Date(patient.created_at).toLocaleDateString()}\n            </div>\n\n            <div className=\"pt-1\">\n              <span\n                className={`inline-block px-3 py-1 text-xs rounded-full font-medium\n                ${\n                  patient.status === \"In Clinic\"\n                    ? \"bg-green-100 text-green-800\"\n                    : patient.status === \"Hold\"\n                    ? \"bg-gray-200 text-gray-800\"\n                    : patient.status === \"Emergency\"\n                    ? \"bg-red-100 text-red-800\"\n                    : \"bg-yellow-100 text-yellow-800\"\n                }`}\n              >\n                {patient.status}\n              </span>\n            </div>\n\n            <div className=\"flex flex-wrap gap-2 pt-2\">\n              <button\n                className=\"bg-yellow-500 text-white px-3 py-1 rounded text-xs\"\n                onClick={() => setEditingPatient(patient)}\n              >\n                Edit\n              </button>\n              <button\n                className=\"bg-green-600 text-white px-3 py-1 rounded text-xs\"\n                onClick={() => updateStatus(patient.pid, \"In Clinic\")}\n              >\n                To Clinic\n              </button>\n              <button\n                className=\"bg-gray-500 text-white px-3 py-1 rounded text-xs\"\n                onClick={() => updateStatus(patient.pid, \"Hold\")}\n              >\n                Hold\n              </button>\n              <button\n                className=\"bg-red-200 text-red-800 px-3 py-1 rounded text-xs\"\n                onClick={() => updateStatus(patient.pid, \"Emergency\")}\n              >\n                Emergency\n              </button>\n              <button\n                className=\"bg-red-600 text-white px-3 py-1 rounded text-xs\"\n                onClick={() => deletePatient(patient.pid)}\n              >\n                Delete\n              </button>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {/* Shared Add/Edit Form below - just like desktop */}\n      <AddPatientForm\n        editingPatient={editingPatient}\n        onPatientSaved={() => {\n          fetchPatients();\n          setEditingPatient(null);\n        }}\n      />\n    </>\n  );\n};\n\nexport default PatientCardMobile;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}